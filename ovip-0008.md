```pseudocode
OVIP: 8
Title: 6 Layers of OpenVASP
Author: Felix Laufenberg <felix.laufenberg@bitcoinsuisse.com>
Discussions-To: https://community.openvasp.org/#narrow/stream/21-protocol-.2F.20ovip
Status: Proposal
Type: Standard
Created: 2020-05-25
```
# Abstract

This OVIP describes the layers which make up the OpenVASP protocol. The key idea is that the layer model does not change, but protocols for single layers are replaced to adapt to changing requirements. The purpose of this OVIP is not to define protocols for the different layers but to provide an overview of existing layers and principles of the design.  

# Specification

## 1. Layer Model Principles

The advantage of a layered model is the modularity that it provides. By decoupling components of the protocol as much as possible we create flexibility of swapping out or adding any component with a lower cost. Any layer should make as little assumptions about it's underlying layer as possible. More importantly, no layer must make *any* assumptions about the layers above it.

## 2. Table of Layers

| Layer | Name           | Purpose                                       | Reference                                                    | Current Implementation |
| ----- | -------------- | --------------------------------------------- | ------------------------------------------------------------ | ---------------------- |
| 1     | Messaging      | Means of sending a message.                   | [Whitepaper](https://www.openvasp.org/wp-content/uploads/2019/11/OpenVasp_Whitepaper.pdf?cache=1) | Whisper                |
| 2     | Routing        | Means of addressing receiver.                 | [ovip-0002](https://github.com/OpenVASP/ovips/blob/master/ovip-0002.md#213-vasp-code)                                                | VASP Code              |
| 3     | Transport      | Message reliability.                          | [ovip-0007]()                                                | -                      |
| 4     | Authentication | VASP authentication.                          | [ovip-0003](https://github.com/OpenVASP/ovips/blob/master/ovip-0003.md) | Index + Dictionary     |
| 5     | Session        | Provides context to a set of messages.        | [ovip-0007]()                                                | Session Model          |
| 6     | Application    | State machine and interpretation of messages. | [Whitepaper](https://www.openvasp.org/wp-content/uploads/2019/11/OpenVasp_Whitepaper.pdf?cache=1) | Travel Rule            |

## 3. Description of Layers

**Messaging Layer**
Abstraction of how message are transported from A to B. For detailed description refer to Section 3 of the original [Whitepaper](https://www.openvasp.org/wp-content/uploads/2019/11/OpenVasp_Whitepaper.pdf?cache=1).

**Routing**
Abstraction of how to refer to the intended receiver of a message. Check section 4.3 of the original [Whitepaper](https://www.openvasp.org/wp-content/uploads/2019/11/OpenVasp_Whitepaper.pdf?cache=1) and [ovip-0002](https://github.com/OpenVASP/ovips/blob/master/ovip-0002.md#213-vasp-code).

**Transport**
Provides abstractions and guarantees around messages. Comparable to TCP/UDP in the internet stack. 

**Authentication**
Creates a reliable link between a VAAN (Identifier, [ovip-0002](https://github.com/OpenVASP/ovips/blob/master/ovip-0002.md)) and a VASP (legal entity). For more details refer to [ovip-0003](https://github.com/OpenVASP/ovips/blob/master/ovip-0003.md).

**Session**
Responsible for creating a session between to VASPs, not only on a technical but also on a business level. This provides context to a set of messages. For more details refer to Sections 6.2 and 6.3 of the original  [Whitepaper](https://www.openvasp.org/wp-content/uploads/2019/11/OpenVasp_Whitepaper.pdf?cache=1) which has been refined by [ovip-0007]().

**Application**
Responsible for handling application level state transitions and defining corresponding messages. Comparable to the Application Layer of the internet stack. Our sole initial application will be the implementation of the travel rule as described in Sections 6.4-6.8 of the original  [Whitepaper](https://www.openvasp.org/wp-content/uploads/2019/11/OpenVasp_Whitepaper.pdf?cache=1).

